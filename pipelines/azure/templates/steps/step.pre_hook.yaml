steps:
  - script: |
      echo "PRE HOOK should be a script"
      echo "This script will be run without any special rights"
      echo "Parsing user pre hook from $(System.DefaultWorkingDirectory)/$(reposRoot)/$(prehook_file)"
    condition: and(succeeded(), not(eq(variables.pre_hook, false)))
    displayName: User Pre Hook

  - task: AzureCLI@2
    condition: and(succeeded(), not(eq(variables.pre_hook, false)))
    displayName: User Azure CLI Pre Hook
    inputs:
      azureSubscription: $(armServiceConnection)
      scriptPath: $(System.DefaultWorkingDirectory)/$(reposRoot)/$(prehook_cli_file)
      scriptType: pscore
      arguments: ""