parameters:
  timeoutInMinutes: 5
steps:
  - task: AzureCLI@2
    displayName: Delete cluster
    timeoutInMinutes: ${{ parameters.timeoutInMinutes }}
    condition: not(eq(variables.delete_cluster, false))
    inputs:
      azureSubscription: $(armServiceConnection)
      scriptType: bash
      scriptPath: $(_crux_steps_path)/delete_cluster/delete_cluster_and_connection.sh
      arguments: $(_crux_steps_path)/delete_cluster $(cname) $(rgroup) $(devOpsOrg) $(devOpsProject) $(devOpsPatUser) $(devOpsPat) $(k8conn) skip